<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>MineDock æ§åˆ¶å°</title>
    <link rel="stylesheet" href="//unpkg.com/element-plus/dist/index.css" />
    <link rel="stylesheet" href="./css/style.css" />

    <script src="//unpkg.com/vue@3"></script>
    <script src="//unpkg.com/element-plus"></script>
    <script src="//unpkg.com/@element-plus/icons-vue"></script>
</head>

<body>
    <div id="app">
        <div class="header">
            <h2>ğŸ® MineDock Server Manager</h2>
            <el-button type="primary" :icon="Refresh" @click="fetchContainers" circle></el-button>
        </div>

        <el-card>
            <template #header>
                <div class="card-header"><span>å®¹å™¨åˆ—è¡¨</span></div>
            </template>
            <el-table :data="containers" style="width: 100%" v-loading="loading">
                <el-table-column prop="names" label="å®¹å™¨åç§°" width="180">
                    <template #default="scope"><el-tag effect="dark">{{ scope.row.names }}</el-tag></template>
                </el-table-column>
                <el-table-column prop="image" label="é•œåƒ" width="220"></el-table-column>
                <el-table-column label="çŠ¶æ€" width="180">
                    <template #default="scope">
                        <span :class="['status-dot', scope.row.state == 'running' ? 'running' : 'exited']"></span>
                        {{ scope.row.state }} ({{ scope.row.status }})
                    </template>
                </el-table-column>
                <el-table-column label="æ“ä½œ">
                    <template #default="scope">
                        <el-button type="success" size="small" :disabled="scope.row.state === 'running'"
                            @click="handleAction(scope.row.id, 'start')">å¯åŠ¨</el-button>
                        <el-button type="danger" size="small" :disabled="scope.row.state !== 'running'"
                            @click="handleAction(scope.row.id, 'stop')">åœæ­¢</el-button>
                        <el-button type="info" size="small" @click="openConsole(scope.row.id)">æ§åˆ¶å°</el-button>
                    </template>
                </el-table-column>
            </el-table>
        </el-card>

        <el-dialog v-model="logVisible" title="ğŸ”´ å®æ—¶æ§åˆ¶å°" width="80%" :before-close="closeConsole">
            <div ref="logBox" class="log-box">
                <div v-for="(line, index) in logs" :key="index" :style="line.style">{{ line.text }}</div>
            </div>
        </el-dialog>
    </div>

    <script src="./js/app.js"></script>
</body>

</html>